---
title: Tangle
sidebar_position: 4
tags:
  - Substrate
---

## Official Links

- [Docs](https://docs.webb.tools/docs/ecosystem-roles/validator/quickstart/)
- [Twitter](https://x.com/webbprotocol)
- [Discord](https://discord.gg/T7VxhKuhWq)
- [Website](https://www.webb.tools/)

:::caution
Perlu Ubuntu 22.04 atau lebih tinggi
:::

## Spek minimal

| Spec | Size |
|----------|----------|
| CPU | Intel(R) Core(TM) i7-7700K CPU @ 4.20GHz |
| RAM | 32 GB |
| SSD | 500 GB |
| Port | 30333, 30334 TCP |

## Install Dependencies

```bash
sudo apt install --assume-yes git clang curl libssl-dev llvm libudev-dev make protobuf-compiler
```

### Open port

```bash
sudo ufw allow ssh; sudo ufw allow 30333
```

## Download Binary & Copy ke /usr/bin

```bash
wget -O tangle https://github.com/webb-tools/tangle/releases/download/v0.4.7/tangle-standalone-linux-amd64 && chmod +x tangle
sudo cp tangle /usr/bin/
```

## Create service

:::danger
Change all **YourName** to your name
:::

```ts filename="tangle.service"
sudo tee /etc/systemd/system/tangle.service > /dev/null << EOF
[Unit]
Description=Tangle Validator Node
After=network-online.target
StartLimitIntervalSec=0
[Service]
User=$USER
Restart=always
RestartSec=3
ExecStart=/usr/bin/tangle \
  --base-path $HOME/.tangle/data/validator/YourName \
  --name YourName \
  --chain tangle-testnet \
  --auto-insert-keys \
  --node-key-file "/home/YourName/node-key" \
  --port 30333 \
  --telemetry-url "wss://telemetry.polkadot.io/submit/ 0" \
  --validator \
  --no-mdns
[Install]
WantedBy=multi-user.target
EOF
```

### Enable service

```bash
sudo systemctl daemon-reload
sudo systemctl enable tangle
sudo systemctl start tangle
```

### Check logs

```bash
sudo journalctl -u tangle -f --no-hostname -o cat
```

- Contoh Output:

```ts title="Output"
2023-03-22 14:55:51 Tangle Standalone Node
2023-03-22 14:55:51 âœŒï¸  version 0.1.15-54624e3-aarch64-macos
2023-03-22 14:55:51 â¤ï¸  by Webb Technologies Inc., 2017-2023
2023-03-22 14:55:51 ðŸ“‹ Chain specification: Tangle Testnet
2023-03-22 14:55:51 ðŸ·  Node name: cooing-morning-2891
2023-03-22 14:55:51 ðŸ‘¤ Role: FULL
2023-03-22 14:55:51 ðŸ’¾ Database: RocksDb at /Users/local/Library/Application Support/tangle-standalone/chains/local_testnet/db/full
2023-03-22 14:55:51 â›“  Native runtime: tangle-standalone-115 (tangle-standalone-1.tx1.au1)
2023-03-22 14:55:51 Bn254 x5 w3 params
2023-03-22 14:55:51 [0] ðŸ’¸ generated 5 npos voters, 5 from validators and 0 nominators
2023-03-22 14:55:51 [0] ðŸ’¸ generated 5 npos targets
2023-03-22 14:55:51 [0] ðŸ’¸ generated 5 npos voters, 5 from validators and 0 nominators
2023-03-22 14:55:51 [0] ðŸ’¸ generated 5 npos targets
2023-03-22 14:55:51 [0] ðŸ’¸ new validator set of size 5 has been processed for era 1
2023-03-22 14:55:52 ðŸ”¨ Initializing Genesis block/state (state: 0xfd16â€¦aefd, header-hash: 0x7c05â€¦a27d)
2023-03-22 14:55:52 ðŸ‘´ Loading GRANDPA authority set from genesis on what appears to be first startup.
2023-03-22 14:55:53 Using default protocol ID "sup" because none is configured in the chain specs
2023-03-22 14:55:53 ðŸ·  Local node identity is: 12D3KooWDaeXbqokqvEMqpJsKBvjt9BUz41uP9tzRkYuky1Wat7Z
2023-03-22 14:55:53 ðŸ’» Operating system: macos
2023-03-22 14:55:53 ðŸ’» CPU architecture: aarch64
2023-03-22 14:55:53 ðŸ“¦ Highest known block at #0
2023-03-22 14:55:53 ã€½ï¸ Prometheus exporter started at 127.0.0.1:9615
2023-03-22 14:55:53 Running JSON-RPC HTTP server: addr=127.0.0.1:9933, allowed origins=["http://localhost:*", "http://127.0.0.1:*", "https://localhost:*", "https://127.0.0.1:*", "https://polkadot.js.org"]
2023-03-22 14:55:53 Running JSON-RPC WS server: addr=127.0.0.1:9944, allowed origins=["http://localhost:*", "http://127.0.0.1:*", "https://localhost:*", "https://127.0.0.1:*", "https://polkadot.js.org"]
2023-03-22 14:55:53 discovered: 12D3KooWMr4L3Dun4BUyp23HZtLfxoQjR56dDp9eH42Va5X6Hfgi /ip4/192.168.0.125/tcp/30304
2023-03-22 14:55:53 discovered: 12D3KooWNHhcCUsZTdTkADmDJbSK9YjbtscHHA8R4jvrbGwjPVez /ip4/192.168.0.125/tcp/30305
2023-03-22 14:55:53 discovered: 12D3KooWMr4L3Dun4BUyp23HZtLfxoQjR56dDp9eH42Va5X6Hfgi /ip4/192.168.88.12/tcp/30304
2023-03-22 14:55:53 discovered: 12D3KooWNHhcCUsZTdTkADmDJbSK9YjbtscHHA8R4jvrbGwjPVez /ip4/192.168.88.12/tcp/30305
```


- Contoh Output kalo dah sync:

```json title="Output"
2021-06-17 03:07:39 ðŸ” Discovered new external address for our node: /ip4/10.26.16.1/tcp/30333/ws/p2p/12D3KooWLtXFWf1oGrnxMGmPKPW54xWCHAXHbFh4Eap6KXmxoi9u
2021-06-17 03:07:40 âš™ï¸  Syncing 218.8 bps, target=#5553764 (17 peers), best: #24034 (0x08afâ€¦dcf5), finalized #23552 (0xd4f0â€¦2642), â¬‡ 173.5kiB/s â¬† 12.7kiB/s
2021-06-17 03:07:45 âš™ï¸  Syncing 214.8 bps, target=#5553765 (20 peers), best: #25108 (0xb272â€¦e800), finalized #25088 (0x94e6â€¦8a9f), â¬‡ 134.3kiB/s â¬† 7.4kiB/s
2021-06-17 03:07:50 âš™ï¸  Syncing 214.8 bps, target=#5553766 (21 peers), best: #26182 (0xe7a5â€¦01a2), finalized #26112 (0xcc29â€¦b1a9), â¬‡ 5.0kiB/s â¬† 1.1kiB/s
2021-06-17 03:07:55 âš™ï¸  Syncing 138.4 bps, target=#5553767 (21 peers), best: #26874 (0xcf4bâ€¦6553), finalized #26624 (0x9dd9â€¦27f8), â¬‡ 18.9kiB/s â¬† 2.0kiB/s
2021-06-17 03:08:00 âš™ï¸  Syncing 37.0 bps, target=#5553768 (22 peers), best: #27059 (0x5b73â€¦6fc9), finalized #26624 (0x9dd9â€¦27f8), â¬‡ 14.3kiB/s â¬† 4.4kiB/s
```

### Bond TNT dan setup validator

- Go to [PolkadotJS](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frpc-archive.tangle.tools#/accounts)
- Create 2 Akun, 1 untuk Stash 1 untuk Controller
- ![stash](/img/tan.png)
- Pilih akun stash & controller, lalu masukan nominal
- Kembali ke VPS
- Generate session key
```py  title="Session Keys"
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "author_rotateKeys", "params":[]}' http://localhost:9944
```
- Copy `0x` Output
- Kembali ke [PolkadotJS](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frpc-archive.tangle.tools#/staking/actions)
- Klik itu, **Set Session Key**
- ![stash](/img/sessi.png)
- Isi dengan `0x` Output yang tadi
- Lalu validate Validate

### Setting identity


- Ke [Polkadot](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frpc-archive.tangle.tools#/accounts)
- Pilih akun stash mu: Set on-chain Identity
- Isi semua data yang mau

### Request judgment

- Go to the [PolkadotJS](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frpc-archive.tangle.tools#/extrinsics)
- Pilih akunmu dan pilih : identity | requestJudgment

---

:::danger
âš ï¸ Jika Anda ingin menghapus âš ï¸

```bash
sudo systemctl stop tangle
sudo systemctl disable tangle
cd $HOME
rm -r .tangle
```
:::
